{% set dataKey = 'upload' %}
{% extends "common/base.html" %}

{% block main %}
<div class="main-a">
    <div class="related-pages">
        <a href="{{WEB_ROOT}}batchUpload.php">批量上传</a>
    </div>

    <h1>单个文件上传</h1>

    <form action="{{WEB_ROOT}}upload.php" method="post" enctype="multipart/form-data" id="attaForm" class="form-a">
        <input type="hidden" name="act" value="verifyAtta">
        <table>
            <col width="80" />
            <col width="280" />
            <tr>
                <th>上传文件：</th>
                <td><input type="file" name="attachment" id="attachment"><span id="attaTip" class="tip"></span></td>
            </tr>
        </table>
    </form>
    <form action="{{WEB_ROOT}}upload.php" method="post" id="uploadForm" class="form-a">
        <input type="hidden" name="act" value="uploadNew">
        <input type="hidden" name="bookInfo[bformat]" value="">
        <input type="hidden" name="bookInfo[book_size]" value="">
        <input type="hidden" name="bookInfo[bpath]" value="">
        <table>
            <col width="80" />
            <col width="280" />
            <tr>
                <th>书名：<span class="required">*</span></th>
                <td><input type="text" class="text" name="bookInfo[book_name]"></td>
                <td><span id="bnameTip" class="tip"></span></td>
            </tr>
            <tr>
                <th>作者：<span class="required">*</span></th>
                <td><input type="text" class="text" name="bookInfo[book_author]"></td>
                <td><span id="bauthorTip" class="tip"></span></td>
            </tr>
            <tr>
                <th>分类：<span class="required">*</span></th>
                <td>
                    <div class="select">
                        <input type="hidden" name="bookInfo[book_type]" value="0">
                        <span>-</span>
                        <ul>
                            {% for type in attr_type %}
                            <li>{{type}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </td>
                <td><span id="btypeTip" class="tip"></span></td>
            </tr>
            <tr>
                <th>简介：</th>
                <td colspan="2"><textarea class="area" name="bookInfo[book_summary]"></textarea></td>
            </tr>
            <tr>
                <th>主角：</th>
                <td colspan="2"><input type="hidden" name="bookInfo[brole]"><span class="tip">多个主角用英文逗号隔开，如“张三,李四”</span></td>
            </tr>
            <tr>
                <th>文风：</th>
                <td>
                    <div class="select">
                        <input type="hidden" name="bookInfo[book_style]" value="0">
                        <span>-</span>
                        <ul>
                            {% for style in attr_style %}
                            <li>{{style}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </td>
            </tr>
            <tr>
                <th>原创网址：</th>
                <td colspan="2"><input type="text" class="text" name="bookInfo[book_original_site]"><span id="borigTip" class="tip"></span></td>
            </tr>
            <tr>
                <th>标签：</th>
                <td colspan="2">
                    <ul class="optionList">
                        {% for key, tag in attr_tags %}
                        <li><input type="checkbox" name="bookInfo[btags][]" value="{{key}}"> <label>{{tag}}</label></li>
                        {% endfor %}
                    </ul>
                    <p id="btagsTip" class="tip"></p>
                </td>
            </tr>
            <tr>
                <td class="td-btn" colspan="2">
                    <button class="btn btn-primary" type="submit">上&nbsp;&nbsp;传</button>
                    <button class="btn btn-secondary" type="reset">重&nbsp;&nbsp;置</button>
                </td>
            </tr>
        </table>
    </form>

    {% if html_uploadResult %}
    {{html_uploadResult | raw}}
    {% endif %}
</div>
{% endblock %}